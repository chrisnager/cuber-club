{"version":3,"file":"static/webpack/static/development/pages/dj.js.f50f5e70362d54197e98.hot-update.js","sources":["webpack:///./components/player/index.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport cubeSounds from '../../constants/cube-sounds'\nimport moveMap from '../../constants/move-map'\nimport PlayerHead from '../player-head'\nimport Track from '../track'\n\nexport default function Player({ isHighlighted, lastTurn, sequence }) {\n  const [paused, setPaused] = useState(true)\n  const [position, setPosition] = useState(0)\n\n  const tracksLength = 32\n  const bpm = 120\n  const msPerBeat = (1000 * 60) / (bpm * 4)\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setPosition(position => (position === tracksLength - 1 ? 0 : position + 1))\n    }, msPerBeat)\n\n    if (paused) clearInterval(interval)\n\n    return () => {\n      clearInterval(interval)\n    }\n  }, [setPosition, paused])\n\n  useEffect(() => {\n    if (lastTurn === 'D') handleLeftClick()\n    if (lastTurn === \"D'\") handleRightClick()\n  }, [lastTurn, sequence])\n\n  const handleLeftClick = () => {\n    console.log('handleLeftClick')\n    setPosition(position - 1)\n  }\n\n  const handleRightClick = () => {\n    console.log('handleRightClick')\n    setPosition(position + 1)\n  }\n\n  const handlePlayPause = () => {\n    setPaused(!paused)\n  }\n\n  const handleInputChange = ({ target: { value } }) => {\n    setPosition(+value)\n  }\n\n  return (\n    <section className=\"player\">\n      <table>\n        <thead>\n          <PlayerHead {...{ tracksLength, paused, handleLeftClick, handlePlayPause, handleRightClick, position, handleInputChange }} />\n        </thead>\n        <tbody>\n          {Object.keys(moveMap).map(cubeSound => (\n            <Track\n              key={cubeSound}\n              move={cubeSound}\n              label={moveMap[cubeSound]}\n              sound={cubeSounds[moveMap[cubeSound]]}\n              {...{ tracksLength, position, isHighlighted, lastTurn }}\n            />\n          ))}\n        </tbody>\n      </table>\n    </section>\n  )\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAKA;AAAA;AAAA;AAAA;AAAA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAaA;;;;A","sourceRoot":""}